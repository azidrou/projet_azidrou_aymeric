{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { Select } from '@ngxs/store';\nimport { PanierState } from 'shared/state/produit.state';\nimport { AddPanier } from 'shared/action/produit.action';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../myservice.service\";\nimport * as i2 from \"@ngxs/store\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/router\";\n\nconst _c0 = function (a1) {\n  return [\"/catalogue\", a1];\n};\n\nfunction CatalogueComponent_tr_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"button\", 3);\n    i0.ɵɵlistener(\"click\", function CatalogueComponent_tr_13_Template_button_click_5_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const c_r1 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.AddToBasket(c_r1);\n    });\n    i0.ɵɵtext(6, \" Ajouter \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"button\", 5);\n    i0.ɵɵtext(8, \"D\\u00E9tails\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const c_r1 = ctx.$implicit;\n    const index_r2 = ctx.index;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(c_r1.libelle);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", c_r1.prix, \" \\u20AC\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(3, _c0, index_r2));\n  }\n}\n\nexport class CatalogueComponent {\n  constructor(service1, store) {\n    this.service1 = service1;\n    this.store = store;\n    this.count = 0;\n    this.funLevel = \"Zéro fun\";\n    this.obsCatalogue = new Observable();\n    this.recherche = ''; //this.countProduits$ = this.store.select(PanierState.countProduits);\n  }\n\n  AddToBasket(p) {\n    this.store.dispatch(new AddPanier(p)); //console.log('test');\n  }\n  /*\r\n  SubToBasket(p: Produit){\r\n    return this.store.dispatch(new SubPanier(p));\r\n  }\r\n  */\n\n\n  valuechange(event) {\n    if (Number(this.recherche)) {\n      this.obsCatalogue = this.service1.getCatalogue().pipe(map(produit => produit.filter( //produit => produit.prix.toString().startsWith(this.recherche.toString()))\n      produit => produit.prix <= Number(this.recherche))));\n    } else {\n      this.obsCatalogue = this.service1.getCatalogue().pipe(map(produit => produit.filter(produit => produit.libelle.startsWith(this.recherche))));\n    }\n  }\n\n  ngOnInit() {\n    this.obsCatalogue = this.service1.getCatalogue();\n  }\n\n  getCount() {\n    this.count = this.service1.getCount();\n  }\n\n  funOuPasFun(counter) {\n    if (this.count >= 104) {\n      this.funLevel = \"iksedé chapeauchapeau\";\n    } else if (this.count >= 103 && this.count < 104) {\n      this.funLevel = \"xd ^^\";\n    } else if (this.count >= 100 && this.count < 103) {\n      this.funLevel = \"Mais c'est SUPER fun ça !\";\n    } else if (this.count > 10 && this.count < 20) {\n      this.funLevel = \"Un petit effort sur le fun svp\";\n    } else if (this.count > 40 && this.count < 50) {\n      this.funLevel = \"Tu ne connais rien au fun\";\n    } else if (this.count > 70 && this.count < 80) {\n      this.funLevel = \"T'es pas fun\";\n    } else if (this.count > 0 && this.count < 100) {\n      this.funLevel = \"C'est pas très fun\";\n    } else if (this.count < 0) {\n      this.funLevel = \"Monstre !!\";\n    }\n  }\n\n  resetFun() {\n    this.service1.count = -2;\n  }\n\n}\n\nCatalogueComponent.ɵfac = function CatalogueComponent_Factory(t) {\n  return new (t || CatalogueComponent)(i0.ɵɵdirectiveInject(i1.MyserviceService), i0.ɵɵdirectiveInject(i2.Store));\n};\n\nCatalogueComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CatalogueComponent,\n  selectors: [[\"app-catalogue\"]],\n  decls: 24,\n  vars: 6,\n  consts: [[\"placeholder\", \"Entrez nom ou prix maximum\", 3, \"ngModel\", \"ngModelChange\"], [\"cellpadding\", \"5em\", \"cellspacing\", \"5em\"], [4, \"ngFor\", \"ngForOf\"], [3, \"click\"], [\"id\", \"funButton\", 3, \"click\"], [3, \"routerLink\"]],\n  template: function CatalogueComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"p\");\n      i0.ɵɵtext(1, \"catalogue works!\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"p\");\n      i0.ɵɵtext(3, \"Recherche : \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"input\", 0);\n      i0.ɵɵlistener(\"ngModelChange\", function CatalogueComponent_Template_input_ngModelChange_4_listener($event) {\n        return ctx.valuechange($event);\n      })(\"ngModelChange\", function CatalogueComponent_Template_input_ngModelChange_4_listener($event) {\n        return ctx.recherche = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"table\", 1);\n      i0.ɵɵelementStart(6, \"thead\");\n      i0.ɵɵelementStart(7, \"tr\");\n      i0.ɵɵelementStart(8, \"th\");\n      i0.ɵɵtext(9, \"Libell\\u00E9\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"th\");\n      i0.ɵɵtext(11, \"Prix\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"tbody\");\n      i0.ɵɵtemplate(13, CatalogueComponent_tr_13_Template, 9, 5, \"tr\", 2);\n      i0.ɵɵpipe(14, \"async\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(15, \"hr\");\n      i0.ɵɵelement(16, \"br\");\n      i0.ɵɵelementStart(17, \"button\", 3);\n      i0.ɵɵlistener(\"click\", function CatalogueComponent_Template_button_click_17_listener() {\n        return ctx.getCount();\n      })(\"click\", function CatalogueComponent_Template_button_click_17_listener() {\n        return ctx.funOuPasFun(ctx.count);\n      });\n      i0.ɵɵtext(18, \"Compteur de fun\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(19);\n      i0.ɵɵelementStart(20, \"p\");\n      i0.ɵɵtext(21);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"button\", 4);\n      i0.ɵɵlistener(\"click\", function CatalogueComponent_Template_button_click_22_listener() {\n        return ctx.resetFun();\n      })(\"click\", function CatalogueComponent_Template_button_click_22_listener() {\n        return ctx.getCount();\n      })(\"click\", function CatalogueComponent_Template_button_click_22_listener() {\n        return ctx.funOuPasFun(ctx.count);\n      });\n      i0.ɵɵtext(23, \"Reset le fun\");\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.recherche);\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(14, 4, ctx.obsCatalogue));\n      i0.ɵɵadvance(6);\n      i0.ɵɵtextInterpolate1(\"\\n\", ctx.count, \"\\n\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.funLevel);\n    }\n  },\n  directives: [i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel, i4.NgForOf, i5.RouterLink],\n  pipes: [i4.AsyncPipe],\n  styles: [\"table[_ngcontent-%COMP%]{border-style:ridge;border-width:3px;border-color:#8ebf42;background-color:#d9d9d9;margin-top:1em}th[_ngcontent-%COMP%]{border:1px solid #095484}td[_ngcontent-%COMP%]{border:2px groove #1c87c9;column-width:500em}#funButton[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px;margin-top:200px}\"]\n});\n\n__decorate([Select(PanierState.countProduits)], CatalogueComponent.prototype, \"countProduits$\", void 0);","map":null,"metadata":{},"sourceType":"module"}